# 입력 텍스트 형식 #

모든 텍스트 입력은 Markdown markup이라고 가정된다.
Markup을 사용하면 쉽게 그럴듯한 책을 만들 수 있다.

[Markdown Syntax](http://daringfireball.net/projects/markdown/syntax) 나 샘플예제를 참고

## 챕터 넣기 ##
```
# 챕터1
## 섹션1
# 챕터2
```

## 인용문 ##
```
일반문장
>  인용문1
>  인용문1
> > 인용문2

일반문장
       인용문3
```
스페이스 또는 탭으로 충분히 띄워준다.

인용문1은 `<blockquote`>로, 인용문3은 `<code`>로 치환된다는 차이도 있지만,
인용문3은 정렬되어 있는 텍스트(preformatted text)라고 가정되어 `<pre`>가 앞에 붙는다.

주의할 것은 인용문3의 한줄의 길이가 화면크기를 넘어갈 경우 잘려 보일 수 있다.

## 강제 줄바꿈 ##
스페이스 네개 이상 또는 탭을 문장뒤에 붙인다.

## 문단구분 ##
```
*
```

빈문단으로 변환된다.

```
* * *
```

문양이 있는 문단 구분기로 변환된다. (지금은 들여쓴 별3개로 입력)

```
-------------------------
```

가로 줄긋기 (horizontal bar)

## 그림 넣기 ##
```
![텍스트][파일명]

또는

![텍스트][번호]

책 끝에서
[번호] 파일명
```

## 리스트 ##
```
  * 아이템 1
  * 아이템 2

또는

아이템1
:    설명
아이템2
:    설명
```

[리스트](http://pythonhosted.org/Markdown/extensions/definition_lists.html) 참고

## 책정보 넣기 ##
문서의 첫부분에 책정보(meta)를 넣어 ePub에 들어갈 정보를 줄 수 있다.

[Meta-Data](http://pythonhosted.org/Markdown/extensions/meta_data.html) 참고

키워드 다음에 ':' 를 스페이스 없이 붙여주면 된다.
다음은 사용되는 키워드이다.

```
Title:      책제목
Subtitle:  책소제목
Author:  저자1
           저자2
Translator: 역자
ISBN:     ISBN번호
cover_url: http://어쩌고  또는 file://저쩌고
```

그외에도 [Footnote](http://pythonhosted.org/Markdown/extensions/footnotes.html) 도 넣을 수 있다.

아직 그외의 Extension들은 ([테이블](http://pythonhosted.org/Markdown/extensions/tables.html) 포함)은 아직 지원하지 않는다.

# 목차 넣기 #
`[TOC]`라는 키워드는 목차 페이지를 만든다. 단 챕터가 정의되어 있어야 함.
[TOC](http://pythonhosted.org/Markdown/extensions/toc.html) 참고.

# 입력 텍스트의 **문단** 형식 #

입력를 분석한 후 문단 구조는 다음 5가지의 형식으로 자동 분류하여 처리한다.

## 1형식 ##
```
첫번째 문단은
이것이다. 끝.

두번째 문단은
저것이다. 끝.
```

빈문장으로 문단이 나뉜다.

## 2형식 ##
```
  첫번째 문단은
이것이다. 끝.
  두번째 문단은
저것이다. 끝.
```

빈문장이 없으며, 들여쓰기(indent)로 문단이 나뉜다.

## 3형식 ##
```
첫번째 문단은 이것이다. 끝.
두번째 문단은 저것이다. 끝.
```

한문단은 한줄로만 되어 있다.
1형식과 유사하나 빈문장이 없다는 것이 다름.

## 4형식 ##
```
첫번째 문단은 
이것이다. 끝.
두번째 문단은 
저것이다. 끝.
```

3형식과 유사하나 정확하게 문단을 알기 어렵다.
."' 등의 문단종료문자로 예측한다.

## 5형식 ##
모든 줄사이에 빈문장이 들어있는 형식.
한줄짜리 빈문장을 지운 후에 형식을 다시 검사한다.


# 입력의 **인코딩** 방식 #

쉽게 생각하면 BOM을 보고 UTF-16, UTF-8을 인식하고, 아니면 완성형(EUC-KR)이라고 생각하면 된다. 그러나 실제로는 유니코드라도 BOM이 빠져있거나 조합형 입력이 들어올 수 있다.
이를 처리하기 위해 약 5천개의 초반글자를 보고 인코딩을 자동판정하도록 되어있다.

자동판정이 비정확한 경우 .utf8.txt, .euckr.txt, .johab.txt 와 같이 확장자명 앞에 인코딩명을 붙인다.